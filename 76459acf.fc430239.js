(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{112:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return r})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return i}));var s=n(3),l=n(7),b=(n(0),n(143)),a=n(271),o={id:"authentication-login",title:"Login"},r={unversionedId:"authentication/authentication-login",id:"authentication/authentication-login",isDocsHomePage:!1,title:"Login",description:"Use the login endpoint to authenticate your user and allow them to access secure endpoints.",source:"@site/docs/authentication/login.md",slug:"/authentication/authentication-login",permalink:"/docs/authentication/authentication-login",version:"current",sidebar:"docs",previous:{title:"New user registration",permalink:"/docs/authentication/authentication-register-user"},next:{title:"Logout",permalink:"/docs/authentication/authentication-logout"}},c=[{value:"Request data",id:"request-data",children:[{value:"Request Headers",id:"request-headers",children:[]},{value:"Request Parameters",id:"request-parameters",children:[]},{value:"POST body",id:"post-body",children:[]}]},{value:"Response data",id:"response-data",children:[{value:"Error codes",id:"error-codes",children:[]},{value:"Successful response",id:"successful-response",children:[]},{value:"Response Cookies",id:"response-cookies",children:[]},{value:"Response Headers",id:"response-headers",children:[]}]}],u={toc:c};function i(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(b.b)("wrapper",Object(s.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(b.b)("p",null,"Use the login endpoint to authenticate your user and allow them to access secure endpoints."),Object(b.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(b.b)("div",Object(s.a)({parentName:"div"},{className:"admonition-heading"}),Object(b.b)("h5",{parentName:"div"},Object(b.b)("span",Object(s.a)({parentName:"h5"},{className:"admonition-icon"}),Object(b.b)("svg",Object(s.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(b.b)("path",Object(s.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(b.b)("div",Object(s.a)({parentName:"div"},{className:"admonition-content"}),Object(b.b)("p",{parentName:"div"},"If your application is available on Safari please use the noATCookie parameter to get the access token in the response headers. Safari by default blocks 3rd party cookies, so you won't be able to use authentication."))),Object(b.b)("h2",{id:"request-data"},"Request data"),Object(b.b)("p",null,Object(b.b)("em",{parentName:"p"},"HTTP method:")," ",Object(b.b)("inlineCode",{parentName:"p"},"POST")),Object(b.b)("p",null,"URL format: https://",Object(b.b)("strong",{parentName:"p"},"baseUrl"),"/",Object(b.b)("strong",{parentName:"p"},"versionNumber"),"/",Object(b.b)("strong",{parentName:"p"},"customEndpointRoute"),"/",Object(b.b)("strong",{parentName:"p"},"userEndpoint"),"?key=",Object(b.b)("strong",{parentName:"p"},"apiKey"),"&",Object(b.b)("strong",{parentName:"p"},"login=true"),"[&",Object(b.b)("strong",{parentName:"p"},"dataOnly"),"=true][&noATCookie=true]"),Object(b.b)("p",null,"Example:"),Object(b.b)("p",null,"https://",Object(b.b)("strong",{parentName:"p"},"app.rested.dev/api"),"/",Object(b.b)("strong",{parentName:"p"},"1"),"/",Object(b.b)("strong",{parentName:"p"},"ce"),"/",Object(b.b)("strong",{parentName:"p"},"examples/auth"),"?key=",Object(b.b)("strong",{parentName:"p"},"d59eb2859c284168ac48aef65046d5dd"),"&",Object(b.b)("strong",{parentName:"p"},"login=true"),"[&",Object(b.b)("strong",{parentName:"p"},"dataOnly"),"=true][&noATCookie=true]"),Object(b.b)("h3",{id:"request-headers"},"Request Headers"),Object(b.b)("table",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Header"),Object(b.b)("td",null,"Required"),Object(b.b)("td",null,"Description")),Object(b.b)("tr",null,Object(b.b)("td",null,"Content-Type"),Object(b.b)("td",null,"Yes"),Object(b.b)("td",null,"Specifies the MIME type of the body of the Request.",Object(b.b)("p",null,"It must be ",Object(b.b)("strong",null,"application/json."))))),Object(b.b)("h3",{id:"request-parameters"},"Request Parameters"),Object(b.b)("p",null,"The following table describes the Request parameters."),Object(b.b)("table",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Parameter"),Object(b.b)("td",null,"Description"),Object(b.b)("td",null,"Required")),Object(b.b)("tr",null,Object(b.b)("td",null,"baseUrl"),Object(b.b)("td",null,"Base url for calling the API.",Object(b.b)("p",null,"Value: app.rested.dev/api")),Object(b.b)("td",null,"Yes")),Object(b.b)("tr",null,Object(b.b)("td",null,"versionNumber"),Object(b.b)("td",null,"Service version.",Object(b.b)("p",null,"Value: The current value is 1.")),Object(b.b)("td",null,"Yes")),Object(b.b)("tr",null,Object(b.b)("td",null,"customEndpointRoute"),Object(b.b)("td",null,"The route which identifies custom endpoints.",Object(b.b)("p",null,"Default value: ce")),Object(b.b)("td",null,"Yes")),Object(b.b)("tr",null,Object(b.b)("td",null,"userEndpoint"),Object(b.b)("td",null,"The endpoint name generated by the user.",Object(b.b)("p",null,"Value: the name created at ",Object(b.b)("a",{href:"https://app.rested.dev"},Object(b.b)("a",Object(s.a)({parentName:"p"},{href:"https://app.rested.dev"}),"https://app.rested.dev")))),Object(b.b)("td",null,"Yes")),Object(b.b)("tr",null,Object(b.b)("td",null,"key"),Object(b.b)("td",null,"The API Key of the project."),Object(b.b)("td",null,"Yes")),Object(b.b)("tr",null,Object(b.b)("td",null,"login"),Object(b.b)("td",null,"Required to perform a login.",Object(b.b)("p",null,"Value: true")),Object(b.b)("td",null,"Yes")),Object(b.b)("tr",null,Object(b.b)("td",null,"dataOnly"),Object(b.b)("td",null,"If used, the endpoint response will be the POST body, without additional information such as \u2018uniqueId\u2019.",Object(b.b)("p",null,"Value: true")),Object(b.b)("td",null,"No")),Object(b.b)("tr",null,Object(b.b)("td",null,"noATCookie"),Object(b.b)("td",null,Object(b.b)("p",null,"If used, the access token will be returned in the ",Object(b.b)("b",null,"Authorization")," header instead of the httpOnly cookie. Use this if your application will be available on Safari, since 3rd party cookies are blocked by default."),Object(b.b)("p",null,"You should also use this if you plan to use authentication on non browser environments."),Object(b.b)("p",null,"Value: true")),Object(b.b)("td",null,"No"))),Object(b.b)("h3",{id:"post-body"},"POST body"),Object(b.b)("p",null,"The login endpoint expects a JSON with user credentials."),Object(b.b)("p",null,"See the table below for more details:"),Object(b.b)("table",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Parameter"),Object(b.b)("td",null,"Description"),Object(b.b)("td",null,"Required")),Object(b.b)("tr",null,Object(b.b)("td",null,"username"),Object(b.b)("td",null,"Type: String"),Object(b.b)("td",null,"Yes - if email is not used")),Object(b.b)("tr",null,Object(b.b)("td",null,"email"),Object(b.b)("td",null,"Type: String"),Object(b.b)("td",null,"Yes - if username is not used")),Object(b.b)("tr",null,Object(b.b)("td",null,"password"),Object(b.b)("td",null,Object(b.b)("p",null,"The user password."),Object(b.b)("p",null,"Type: String")),Object(b.b)("td",null,"Yes"))),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Note:")," Your users can log in with username or email, not both."),Object(b.b)("h2",{id:"response-data"},"Response data"),Object(b.b)("h3",{id:"error-codes"},"Error codes"),Object(b.b)("table",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Error code"),Object(b.b)("td",null,"Description")),Object(b.b)("tr",null,Object(b.b)("td",null,"400"),Object(b.b)("td",null,"Possible reasons:",Object(b.b)("ul",null,Object(b.b)("li",null,"Endpoint or API Key not valid."),Object(b.b)("li",null,'Wrong Content-Type, it only accepts "application/json".'),Object(b.b)("li",null,"Empty Request body."),Object(b.b)("li",null,"If ",Object(b.b)("strong",null,"username"),"/",Object(b.b)("strong",null,"email")," or ",Object(b.b)("strong",null,"password")," are not present in the request body.")))),Object(b.b)("tr",null,Object(b.b)("td",null,"401"),Object(b.b)("td",null,"Invalid credentials.")),Object(b.b)("tr",null,Object(b.b)("td",null,"403"),Object(b.b)("td",null,"Missing API Key, not allowed origin or disallowed request without orign."))),Object(b.b)("h3",{id:"successful-response"},"Successful response"),Object(b.b)("pre",null,Object(b.b)("code",Object(s.a)({parentName:"pre"},{className:"language-javascript"}),'{\nuniqueId: "3f38bf9e1bb54d2396d1f1b8fbba1630",\ndata: { username: "usernameeee" },\ncreatedAt: "2020-12-27T10:58:45.000Z",\nupdatedAt: "2020-12-27T10:58:45.000Z"\n}\n')),Object(b.b)("h3",{id:"response-cookies"},"Response Cookies"),Object(b.b)("table",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Cookie"),Object(b.b)("td",null,"Description")),Object(b.b)("tr",null,Object(b.b)("td",null,a.ACCESS_TOKEN_COOKIE_NAME),Object(b.b)("td",null,"If the credentials are valid, the access token is sent in a httpOnly cookie as part of the response. httpOnly cookies are not accessible via JS.",Object(b.b)("p",null,"This token/cookie is valid for 30 days."),Object(b.b)("p",null,"To generate a new one a new login is required."),Object(b.b)("p",null,"This cookie is deleted when logout is performed."),Object(b.b)("p",null,"Note: The cookie is only returned if the noATCookie parameter is not used.")))),Object(b.b)("h3",{id:"response-headers"},"Response Headers"),Object(b.b)("table",null,Object(b.b)("tr",null,Object(b.b)("td",null,"Header"),Object(b.b)("td",null,"Description")),Object(b.b)("tr",null,Object(b.b)("td",null,"Authorization"),Object(b.b)("td",null,Object(b.b)("p",null,"If the credentials are valid and the noATCookie parameter is used, the access token will be returned in the ",Object(b.b)("b",null,"Authorization")," header following the Bearer schema."),Object(b.b)("p",null,"The access token should be stored on the client side and sent in the Authorization header of the request for secure endpoints.")))))}i.isMDXComponent=!0},271:function(e,t,n){const s=n(278),l=n(276),b="poaYUITERNM&XBnudycp\u20ac9TIFVAsadasdjikoihvA_SiyutrhgHJHGs#3jmndlkjMVfsdfsolasdbNC12X1257asd!QPLK3";t.ACCESS_TOKEN_COOKIE_NAME="__Secure-rested-access-token",t.COOKIE_EXPIRY_TIME=43200,t.decodeAccessToken=e=>{const t=s.decode(e,b),{sub:n,exp:a}=t;return{uniqueId:n,expiryDateUnix:l.unix(a)}},t.generateJWT=e=>{const t=l().add(43200,"minutes"),n={exp:t.unix(),iat:l().unix(),sub:e};return{accessToken:s.encode(n,b),expiresIn:t}}},277:function(e,t,n){var s={"./af":146,"./af.js":146,"./ar":147,"./ar-dz":148,"./ar-dz.js":148,"./ar-kw":149,"./ar-kw.js":149,"./ar-ly":150,"./ar-ly.js":150,"./ar-ma":151,"./ar-ma.js":151,"./ar-sa":152,"./ar-sa.js":152,"./ar-tn":153,"./ar-tn.js":153,"./ar.js":147,"./az":154,"./az.js":154,"./be":155,"./be.js":155,"./bg":156,"./bg.js":156,"./bm":157,"./bm.js":157,"./bn":158,"./bn.js":158,"./bo":159,"./bo.js":159,"./br":160,"./br.js":160,"./bs":161,"./bs.js":161,"./ca":162,"./ca.js":162,"./cs":163,"./cs.js":163,"./cv":164,"./cv.js":164,"./cy":165,"./cy.js":165,"./da":166,"./da.js":166,"./de":167,"./de-at":168,"./de-at.js":168,"./de-ch":169,"./de-ch.js":169,"./de.js":167,"./dv":170,"./dv.js":170,"./el":171,"./el.js":171,"./en-au":172,"./en-au.js":172,"./en-ca":173,"./en-ca.js":173,"./en-gb":174,"./en-gb.js":174,"./en-ie":175,"./en-ie.js":175,"./en-il":176,"./en-il.js":176,"./en-nz":177,"./en-nz.js":177,"./eo":178,"./eo.js":178,"./es":179,"./es-do":180,"./es-do.js":180,"./es-us":181,"./es-us.js":181,"./es.js":179,"./et":182,"./et.js":182,"./eu":183,"./eu.js":183,"./fa":184,"./fa.js":184,"./fi":185,"./fi.js":185,"./fo":186,"./fo.js":186,"./fr":187,"./fr-ca":188,"./fr-ca.js":188,"./fr-ch":189,"./fr-ch.js":189,"./fr.js":187,"./fy":190,"./fy.js":190,"./gd":191,"./gd.js":191,"./gl":192,"./gl.js":192,"./gom-latn":193,"./gom-latn.js":193,"./gu":194,"./gu.js":194,"./he":195,"./he.js":195,"./hi":196,"./hi.js":196,"./hr":197,"./hr.js":197,"./hu":198,"./hu.js":198,"./hy-am":199,"./hy-am.js":199,"./id":200,"./id.js":200,"./is":201,"./is.js":201,"./it":202,"./it.js":202,"./ja":203,"./ja.js":203,"./jv":204,"./jv.js":204,"./ka":205,"./ka.js":205,"./kk":206,"./kk.js":206,"./km":207,"./km.js":207,"./kn":208,"./kn.js":208,"./ko":209,"./ko.js":209,"./ky":210,"./ky.js":210,"./lb":211,"./lb.js":211,"./lo":212,"./lo.js":212,"./lt":213,"./lt.js":213,"./lv":214,"./lv.js":214,"./me":215,"./me.js":215,"./mi":216,"./mi.js":216,"./mk":217,"./mk.js":217,"./ml":218,"./ml.js":218,"./mn":219,"./mn.js":219,"./mr":220,"./mr.js":220,"./ms":221,"./ms-my":222,"./ms-my.js":222,"./ms.js":221,"./mt":223,"./mt.js":223,"./my":224,"./my.js":224,"./nb":225,"./nb.js":225,"./ne":226,"./ne.js":226,"./nl":227,"./nl-be":228,"./nl-be.js":228,"./nl.js":227,"./nn":229,"./nn.js":229,"./pa-in":230,"./pa-in.js":230,"./pl":231,"./pl.js":231,"./pt":232,"./pt-br":233,"./pt-br.js":233,"./pt.js":232,"./ro":234,"./ro.js":234,"./ru":235,"./ru.js":235,"./sd":236,"./sd.js":236,"./se":237,"./se.js":237,"./si":238,"./si.js":238,"./sk":239,"./sk.js":239,"./sl":240,"./sl.js":240,"./sq":241,"./sq.js":241,"./sr":242,"./sr-cyrl":243,"./sr-cyrl.js":243,"./sr.js":242,"./ss":244,"./ss.js":244,"./sv":245,"./sv.js":245,"./sw":246,"./sw.js":246,"./ta":247,"./ta.js":247,"./te":248,"./te.js":248,"./tet":249,"./tet.js":249,"./tg":250,"./tg.js":250,"./th":251,"./th.js":251,"./tl-ph":252,"./tl-ph.js":252,"./tlh":253,"./tlh.js":253,"./tr":254,"./tr.js":254,"./tzl":255,"./tzl.js":255,"./tzm":256,"./tzm-latn":257,"./tzm-latn.js":257,"./tzm.js":256,"./ug-cn":258,"./ug-cn.js":258,"./uk":259,"./uk.js":259,"./ur":260,"./ur.js":260,"./uz":261,"./uz-latn":262,"./uz-latn.js":262,"./uz.js":261,"./vi":263,"./vi.js":263,"./x-pseudo":264,"./x-pseudo.js":264,"./yo":265,"./yo.js":265,"./zh-cn":266,"./zh-cn.js":266,"./zh-hk":267,"./zh-hk.js":267,"./zh-tw":268,"./zh-tw.js":268};function l(e){var t=b(e);return n(t)}function b(e){if(!n.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}l.keys=function(){return Object.keys(s)},l.resolve=b,e.exports=l,l.id=277},280:function(e,t){},281:function(e,t){},282:function(e,t){},283:function(e,t){},284:function(e,t){},285:function(e,t){},286:function(e,t){},287:function(e,t){},288:function(e,t){},289:function(e,t){},290:function(e,t){},291:function(e,t){}}]);